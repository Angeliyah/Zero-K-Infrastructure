@using ZeroKWeb
@using ZkData
@if (!Global.IsLobbyAccess || Global.IsAccountAuthorized)
{

    if (!(Global.IsAccountAuthorized))
    {
        <script language="javascript">
            $(function() {
                $("#steamloginsubmit")
                    .click(function() {
                        $('input[name="steamlogon"]').val("true");
                        $(this).closest('form').submit();
                        return false;
                    });
            });
        </script>
        <form method="post" action="@Url.Action("Logon", "Home")" style="padding: 0; margin: 0;">
            Zero-K Name: 
            <input type="text" name="login" />
            &nbsp;&nbsp; 
            <a href="#" id="steamloginsubmit"  nicetitle="Login using Steam (must create account in-game first)">
                <img src="~/Img/sits_small.png" style="vertical-align: middle;"/>
            </a>
            &nbsp;<i>OR</i>&nbsp;&nbsp;
            Password:
            <input type="password" name="password" />
            <input type="hidden" name="steamlogon"/>
            &nbsp;&nbsp;
            <a href="#" onclick="$(this).closest('form').submit();return false;" nicetitle="Login with your Zero-K lobby account (must create account in-game first)">
                <img src="~/Img/login.png" style="vertical-align: middle; height: 24px;" />
            </a>
            <input type="hidden" name="referer" value="@(Request["ReturnUrl"] ?? Request.Url?.ToString())" />
        </form>
    }
    else
    {
        <span>
            &nbsp;
            @Html.PrintAccount(Global.Account)
            <input type="hidden" name="referer" value="@Request.Url" />
            @if (Global.Clan != null)
            {
                <span> | @Html.PrintClan(Global.Clan)</span>
            }

            @if (Global.Account.Faction != null)
            {
                <span> | @Html.PrintFaction(Global.Account.Faction, false)</span>
            }
            @if (Global.Account.Kudos > 0)
            {
                <span nicetitle="Metagame currency that you can get by donating to Zero-K. You can use it to get access to unique commander decorations"> | Kudos: @Global.Account.Kudos </span>
            }
            @if (GlobalConst.PlanetWarsMode != PlanetWarsModes.AllOffline)
            {
                <span> | @Html.PrintMetal(Global.Account) | @Html.PrintDropships(Global.Account) | @Html.PrintBombers(Global.Account) | @Html.PrintWarps(Global.Account)</span>
            }
            &nbsp;
            @if (Global.IsLobbyAccess)
            {
                <a href="@Url.Action("Logout", "Home")@("@logout")" nicetitle="Logout"><img src="~/Img/logout.png" style="width:20px" /></a>
            }
            else
            {
                <a href="@Url.Action("Logout", "Home", new { referer = Request.Url })" nicetitle="Logout"><img src="~/Img/logout.png" style="width:20px" /></a>
            }

        </span>


    }
}
